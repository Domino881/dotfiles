# Main modifier
$mainMod = SUPER # windows key
# assign apps

$default.$QUICKAPPS =
$default.BROWSER=firefox
$default.EDITOR=nvim
$default.EXPLORER=thunar
$default.TERMINAL=kitty
$default.LOCKSCREEN=hyprlock
$default.IDLE=hypridle
$default.MENU=rofi -show drun

$BROWSER=$default.BROWSER
$EDITOR=$default.EDITOR
$EXPLORER=$default.EXPLORER
$TERMINAL=$default.TERMINAL
$LOCKSCREEN=$default.LOCKSCREEN
$IDLE=$default.IDLE


# // █░░ ▄▀█ █░█ █▄░█ █▀▀ █░█
# // █▄▄ █▀█ █▄█ █░▀█ █▄▄ █▀█

# See https://wiki.hyprland.org/Configuring/Keywords/

$start.DBUS_SHARE_PICKER=dbus-update-activation-environment --systemd --all # for XDPH
$start.SYSTEMD_SHARE_PICKER=systemctl --user import-environment QT_QPA_PLATFORMTHEME WAYLAND_DISPLAY XDG_CURRENT_DESKTOP # for XDPH
$start.BAR=ln -s ~/.config/eww_hyprland/ ~/.config/eww; ~/.config/eww/eww_launch.sh
$start.NOTIFICATIONS=dunst -config ~/.cache/wal/dunstrc
$start.APPTRAY_BLUETOOTH=blueman-applet
$start.NETWORK_MANAGER=nm-applet --indicator
$start.REMOVABLE_MEDIA=udiskie --no-automount --smart-tray
$start.AUTH_DIALOGUE=systemctl --user start hyprpolkitagent
$start.IDLE_DAEMON=$IDLE
$start.BATTERY_PROTECTION=echo 70 90 | tee {/etc/default,/sys/devices/platform}/huawei-wmi/charge_control_thresholds
$start.WALLPAPER=/home/dominik/.local/bin/set_wallpaper.sh ~/Pictures/wallpapers/tapety/NGC7000.jpg
$start.BLUE_LIGHT_FILTER=hyprsunset

# // █▀▀ █▄░█ █░█
# // ██▄ █░▀█ ▀▄▀

# See https://wiki.hyprland.org/Configuring/Environment-variables/

# Toolkit Backend Variables - https://wiki.hyprland.org/Configuring/Environment-variables/#toolkit-backend-variables
$env.GDK_BACKEND = wayland,x11,* # GTK: Use wayland if available. If not: try x11, then any other GDK backend.
# $env.QT_QPA_PLATFORM = wayland;xcb # Qt: Use wayland if available, fall back to x11 if not.
$env.SDL_VIDEODRIVER = wayland # Run SDL2 applications on Wayland. Remove or set to x11 if games that provide older versions of SDL cause compatibility issues
$env.CLUTTER_BACKEND = wayland # Clutter package already has wayland enabled, this variable will force Clutter applications to try and use the Wayland backend
$env.GTK_THEME=Adwaita:dark
$env.GTK2_RC_FILES=/usr/share/themes/Adwaita-dark/gtk-2.0/gtkrc

# XDG Specifications - https://wiki.hyprland.org/Configuring/Environment-variables/#xdg-specifications
$env.XDG_CURRENT_DESKTOP = Hyprland
$env.XDG_SESSION_TYPE = wayland
$env.XDG_SESSION_DESKTOP = Hyprland

# Qt Variables  - https://wiki.hyprland.org/Configuring/Environment-variables/#qt-variables

$env.QT_AUTO_SCREEN_SCALE_FACTOR = 1.5 # (From the Qt documentation) enables automatic scaling, based on the monitor’s pixel density
$env.QT_QPA_PLATFORM = wayland;xcb # Tell Qt applications to use the Wayland backend, and fall back to x11 if Wayland is unavailable
$env.QT_WAYLAND_DISABLE_WINDOWDECORATION = 1 # Disables window decorations on Qt applications
$env.QT_QPA_PLATFORMTHEME = qt6ct # Tells Qt based applications to pick your theme from qt5ct, use with Kvantum.
$env.QT_STYLE_OVERRIDE=Adwaita-Dark

$env.MOZ_ENABLE_WAYLAND=1 # Enable Wayland for Firefox
$env.GDK_SCALE=1.5 # Set GDK scale to 1 // For Xwayland on HiDPI
$env.ELECTRON_OZONE_PLATFORM_HINT=auto # Set Electron Ozone Platform Hint to auto // For Electron apps on Wayland

#  XDG-DIRS
$env.XDG_RUNTIME_DIR=$XDG_RUNTIME_DIR
$env.XDG_CONFIG_HOME=$HOME/.config
$env.XDG_CACHE_HOME=$HOME/.cache
$env.XDG_DATA_HOME=$HOME/.local/share
$env.XDG_STATE_HOME=$HOME/.local/state



# // █▀▀ ▀█▀ █▄▀
# // █▄█ ░█░ █░█

# $default.GTK_THEME=Wallbash-Gtk
# $default.ICON_THEME=Tela-circle-dracula
$default.COLOR_SCHEME=prefer-dark

# $GTK_THEME=$default.GTK_THEME
# $ICON_THEME=$default.ICON_THEME
$COLOR_SCHEME=$default.COLOR_SCHEME

# // █▀▀ █░█ █▀█ █▀ █▀█ █▀█
# // █▄▄ █▄█ █▀▄ ▄█ █▄█ █▀▄

$default.CURSOR_THEME=Bibata-Modern-Ice
$default.CURSOR_SIZE=24

$CURSOR_THEME=$default.CURSOR_THEME
$CURSOR_SIZE=$default.CURSOR_SIZE

# // █▀▀ █▀█ █▄░█ ▀█▀
# // █▀░ █▄█ █░▀█ ░█░

$default.FONT=Noto Sans
$default.FONT_SIZE=12
$default.DOCUMENT_FONT=Noto Sans
$default.DOCUMENT_FONT_SIZE=12
$default.MONOSPACE_FONT=JetBrainsMono Nerd Font
$default.MONOSPACE_FONT_SIZE=12
$default.NOTIFICATION_FONT=JetBrainsMono Nerd Font
$default.BAR_FONT=JetBrainsMono Nerd Font
# $default.MENU_FONT=This is not yet set as it looks perfect with the global font 
$default.FONT_ANTIALIASING=rgba
$default.FONT_HINTING=full

$FONT=$default.FONT
$FONT_SIZE=$default.FONT_SIZE
$DOCUMENT_FONT=$default.DOCUMENT_FONT
$DOCUMENT_FONT_SIZE=$default.DOCUMENT_FONT_SIZE
$MONOSPACE_FONT=$default.MONOSPACE_FONT
$MONOSPACE_FONT_SIZE=$default.MONOSPACE_FONT_SIZE
$NOTIFICATION_FONT=$default.NOTIFICATION_FONT
$BAR_FONT=$default.BAR_FONT
# $MENU_FONT=$default.MENU_FONT
$FONT_ANTIALIASING=$default.FONT_ANTIALIASING
$FONT_HINTING=$default.FONT_HINTING

# // █▀▄▀█ █▀█ █▄░█ █ ▀█▀ █▀█ █▀█
# // █░▀░█ █▄█ █░▀█ █ ░█░ █▄█ █▀▄

# See https://wiki.hyprland.org/Configuring/Monitors/

monitor =eDP-1, 2160x1440@60, 0x0, 1.5
monitor = ,preferred,auto,auto

# // █▀ █▀█ █▀▀ █▀▀ █ ▄▀█ █░░
# // ▄█ █▀▀ ██▄ █▄▄ █ █▀█ █▄▄

# pywal colors
source=$env.XDG_CACHE_HOME/wal/colors-hyprland.conf

general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
    col.active_border = $color8 $color2 45deg
    col.inactive_border = rgba(222222ff)
    resize_on_border = false
    allow_tearing = false
    layout = dwindle
}

decoration {
    dim_special = 0.3
    active_opacity = 1.0
    inactive_opacity = 0.75
    fullscreen_opacity = 1
    rounding = 10
    rounding_power = 2

    shadow {
        enabled = false
    }
    blur {
        enabled = true
    }
}

# // ▄▀█ █▄░█ █ █▀▄▀█ ▄▀█ ▀█▀ █ █▀█ █▄░█
# // █▀█ █░▀█ █ █░▀░█ █▀█ ░█░ █ █▄█ █░▀█

# See https://wiki.hyprland.org/Configuring/Animations/

animations {
    enabled = yes
    bezier = wind, 0.05, 0.9, 0.1, 1.05
    bezier = winIn, 0.1, 1.1, 0.1, 1.1
    bezier = winOut, 0.3, -0.3, 0, 1
    bezier = liner, 1, 1, 1, 1
    animation = windows, 1, 2, wind, slide
    animation = windowsIn, 1, 2, winIn, slide
    animation = windowsOut, 1, 2, winOut, slide
    animation = windowsMove, 1, 2, wind, slide
    animation = border, 1, 1, liner
    animation = borderangle, 0, 30, liner, once
    animation = fade, 1, 10, default
    animation = workspaces, 1, 4, wind
}


# // █ █▄░█ █▀█ █░█ ▀█▀
# // █ █░▀█ █▀▀ █▄█ ░█░


input {
    # See https://wiki.hyprland.org/Configuring/Variables/#input
    accel_profile = flat 
    numlock_by_default = true
    follow_mouse = 1
    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
    touchpad {
        natural_scroll = true
    }
    kb_layout = pl
    kb_variant = ,qwerty
}

gestures {
    #See https://wiki.hyprland.org/Configuring/Variables/#gestures
    workspace_swipe = true
}


# █▄▀ █▀▀ █▄█ █▄▄ █ █▄░█ █▀▄ █ █▄░█ █▀▀ █▀
# █░█ ██▄ ░█░ █▄█ █ █░▀█ █▄▀ █ █░▀█ █▄█ ▄█

bind = $mainMod, RETURN, exec, $default.TERMINAL
bind = $mainMod + SHIFT, Q, killactive,
bind = $mainMod + SHIFT, E, exit,
bind = $mainMod, E, exec, $default.EXPLORER
bind = $mainMod + SHIFT, SPACE, togglefloating,
bind = $mainMod, F, fullscreen,
bind = $mainMod, D, exec, $default.MENU
bind = $mainMod, P, pseudo, # dwindle
bind = $mainMod + CTRL, L, exec, hyprlock

bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d
bind = SUPER SHIFT, H, movewindow, l
bind = SUPER SHIFT, L, movewindow, r
bind = SUPER SHIFT, K, movewindow, u
bind = SUPER SHIFT, J, movewindow, d

bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, ~/.config/eww/scripts/changedvolume & wpctl set-mute @DEFAULT_AUDIO_SINK@ 0 && wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, ~/.config/eww/scripts/changedvolume & wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, ~/.config/eww/scripts/changedvolume & wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, ~/.config/eww/scripts/changedmicmute & wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, ~/.config/eww/scripts/changedbrighness & light -A 5%
bindel = ,XF86MonBrightnessDown, exec, ~/.config/eww/scripts/changedbrighness & light -U 5%

# Requires playerctl
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous


# // █░░ ▄▀█ █▄█ █▀█ █░█ ▀█▀ █▀
# // █▄▄ █▀█ ░█░ █▄█ █▄█ ░█░ ▄█

# See https://wiki.hyprland.org/Configuring/Dwindle-Layout/

dwindle {
    pseudotile = yes
    preserve_split = yes
}

# See https://wiki.hyprland.org/Configuring/Master-Layout/

master {
    new_status = master
}


# // █▀▄▀█ █ █▀ █▀▀
# // █░▀░█ █ ▄█ █▄▄

# See https://wiki.hyprland.org/Configuring/Variables/#misc

misc {
    vrr = 0
    disable_hyprland_logo = true
    disable_splash_rendering = true
    force_default_wallpaper = 0
}

xwayland {
    force_zero_scaling = true
}


general {
    snap { # snapping for floating windows
        enabled = true
    }
}


# // █▀ █▀█ █░█ █▀█ █▀▀ █▀▀
# // ▄█ █▄█ █▄█ █▀▄ █▄▄ ██▄

#? By Hyprland convention env and startup files are sourced at the end of the main configuration file
#? To ensure that the user's settings are not overridden by the default settings
#? This will let us launch after all envs and variables are set.

# LEGACY
$term = $TERMINAL
$editor = $EDITOR
$file = $EXPLORER
$browser = $BROWSER

# Misc 
misc {
    font_family = $FONT
}


# // █▀▀ █▄░█ █░█
# // ██▄ █░▀█ ▀▄▀

# # See https://wiki.hyprland.org/Configuring/Environment-variables/

# Qt Variables
env = QT_AUTO_SCREEN_SCALE_FACTOR,$env.QT_AUTO_SCREEN_SCALE_FACTOR
env = QT_QPA_PLATFORM,$env.QT_QPA_PLATFORM
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,$env.QT_WAYLAND_DISABLE_WINDOWDECORATION
env = QT_QPA_PLATFORMTHEME,$env.QT_QPA_PLATFORMTHEME
env = GTK_THEME,$env.GTK_THEME
env = GTK2_RC_FILES,$env.GTK2_RC_FILES
env = QT_STYLE_OVERRIDE,$env.QT_STYLE_OVERRIDE

# Wayland-ENV
env = MOZ_ENABLE_WAYLAND,$env.MOZ_ENABLE_WAYLAND
env = GDK_SCALE,$env.GDK_SCALE
env = ELECTRON_OZONE_PLATFORM_HINT,$env.ELECTRON_OZONE_PLATFORM_HINT

# XDG Spec
env = XDG_CURRENT_DESKTOP,$env.XDG_CURRENT_DESKTOP
env = XDG_SESSION_TYPE,$env.XDG_SESSION_TYPE
env = XDG_SESSION_DESKTOP,$env.XDG_SESSION_DESKTOP

# XDG-ENV
env = XDG_CONFIG_HOME,$env.XDG_CONFIG_HOME
env = XDG_CACHE_HOME,$env.XDG_CACHE_HOME
env = XDG_DATA_HOME,$env.XDG_DATA_HOME

# CURSOR ENV
# env = HYPRCURSOR_THEME,$CURSOR_THEME
# env = HYPRCURSOR_SIZE,$CURSOR_SIZE
# env = XCURSOR_THEME,$CURSOR_THEME
# env = XCURSOR_SIZE,$CURSOR_SIZE

# Execute on reload

# // █░░ ▄▀█ █░█ █▄░█ █▀▀ █░█
# // █▄▄ █▀█ █▄█ █░▀█ █▄▄ █▀█

exec-once = $start.DBUS_SHARE_PICKER # for XDPHgl
exec-once = $start.SYSTEMD_SHARE_PICKER # for XDPH
exec-once = $start.AUTH_DIALOGUE # authentication dialogue for GUI apps
exec-once = $start.BAR # launch the system bar
exec-once = $start.APPTRAY_BLUETOOTH # systray app for Bluetooth
exec-once = $start.REMOVABLE_MEDIA # front-end that allows to manage removable media
exec-once = $start.NETWORK_MANAGER # systray app for Network/Wifi
exec-once = $start.NOTIFICATIONS # start notification demon
exec-once = $start.TEXT_CLIPBOARD # clipboard store text data
exec-once = $start.IMAGE_CLIPBOARD # clipboard store image data
exec-once = $start.WALLPAPER # start wallpaper daemon
exec-once = $start.BATTERY_NOTIFY # battery notification
exec-once = $start.BATTERY_PROTECTION # battery charge thresholds
exec-once = $start.IDLE_DAEMON # idle daemon
exec-once = $start.BLUE_LIGHT_FILTER # blue light filter

#? Rules can be added here as most of the configuration are dynamic

# // █░█░█ █ █▄░█ █▀▄ █▀█ █░█░█   █▀█ █░█ █░░ █▀▀ █▀
# // ▀▄▀▄▀ █ █░▀█ █▄▀ █▄█ ▀▄▀▄▀   █▀▄ █▄█ █▄▄ ██▄ ▄█

# See https://wiki.hyprland.org/Configuring/Window-Rules/

# Ony add the Core applications here
windowrulev2 = float, class:^(com.gabm.satty)$
windowrulev2 = float,title:^(About Mozilla Firefox)$
windowrulev2 = float,class:^(firefox)$,title:^(Picture-in-Picture)$
windowrulev2 = float,class:^(firefox)$,title:^(Library)$
windowrulev2 = float,class:^(.*)$,initialTitle:^(.*)(top)(.*)$
windowrulev2 = float,class:^(.*)$,initialTitle:^(.*)(btop)(.*)$
windowrulev2 = float,class:^(.*)$,initialTitle:^(.*)(htop)(.*)$
windowrulev2 = float,class:^(vlc)$
windowrulev2 = float,class:^(kvantummanager)$
windowrulev2 = float,class:^(qt5ct)$
windowrulev2 = float,class:^(qt6ct)$
windowrulev2 = float,class:^(nwg-look)$
windowrulev2 = float,class:^(nwg-displays)$
windowrulev2 = float,class:^(org.kde.ark)$
windowrulev2 = float,class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = float,class:^(blueman-manager)$
windowrulev2 = float,class:^(nm-applet)$
windowrulev2 = float,class:^(nm-connection-editor)$
windowrulev2 = float,class:^(org.kde.polkit-kde-authentication-agent-1)$
windowrulev2 = float,class:^([Xx]dg-desktop-portal-gtk)$
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0


# // █░░ ▄▀█ █▄█ █▀▀ █▀█   █▀█ █░█ █░░ █▀▀ █▀
# // █▄▄ █▀█ ░█░ ██▄ █▀▄   █▀▄ █▄█ █▄▄ ██▄ ▄█

layerrule = blur,rofi
layerrule = ignorezero,rofi
layerrule = blur,notifications
layerrule = ignorezero,notifications
layerrule = blur,swaync-notification-window
layerrule = ignorezero,swaync-notification-window
layerrule = blur,swaync-control-center
layerrule = ignorezero,swaync-control-center
layerrule = blur,logout_dialog
